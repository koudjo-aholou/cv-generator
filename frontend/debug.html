<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Debug Web Components</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        p { margin: 10px 0; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üîç Debug Web Components</h1>
    <div id="result"></div>
    <hr>
    <div id="component-test"></div>

    <script type="module">
        const result = document.getElementById('result');
        const componentTest = document.getElementById('component-test');

        result.innerHTML += '<p class="success">‚úÖ JavaScript fonctionne</p>';

        // Test 1: Import cvStateService
        try {
            const module = await import('./js/services/state/cvStateService.js');
            result.innerHTML += '<p class="success">‚úÖ cvStateService charg√©</p>';
            console.log('cvStateService:', module);
        } catch(e) {
            result.innerHTML += `<p class="error">‚ùå Erreur cvStateService: ${e.message}</p>`;
            console.error(e);
        }

        // Test 2: Import file-uploader
        try {
            await import('./js/ui/components/file-uploader.js');
            result.innerHTML += '<p class="success">‚úÖ file-uploader module charg√©</p>';
        } catch(e) {
            result.innerHTML += `<p class="error">‚ùå Erreur import file-uploader: ${e.message}</p>`;
            console.error(e);
        }

        // Test 3: Cr√©er le composant
        try {
            const uploader = document.createElement('file-uploader');
            componentTest.appendChild(uploader);
            result.innerHTML += '<p class="success">‚úÖ file-uploader cr√©√© dans le DOM</p>';

            // Attendre le render
            setTimeout(() => {
                console.log('Contenu du composant:', uploader.innerHTML);
                if (uploader.innerHTML && uploader.innerHTML.trim().length > 0) {
                    result.innerHTML += '<p class="success">‚úÖ file-uploader a du contenu HTML</p>';
                    result.innerHTML += `<p>Longueur: ${uploader.innerHTML.length} caract√®res</p>`;
                } else {
                    result.innerHTML += '<p class="error">‚ùå file-uploader est VIDE</p>';
                }
            }, 1000);

        } catch(e) {
            result.innerHTML += `<p class="error">‚ùå Erreur cr√©ation composant: ${e.message}</p>`;
            console.error(e);
        }

        // Test 4: V√©rifier customElements
        setTimeout(() => {
            const defined = customElements.get('file-uploader');
            if (defined) {
                result.innerHTML += '<p class="success">‚úÖ file-uploader est enregistr√© dans customElements</p>';
            } else {
                result.innerHTML += '<p class="error">‚ùå file-uploader NOT enregistr√©</p>';
            }
        }, 500);
    </script>
</body>
</html>
